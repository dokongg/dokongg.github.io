<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Dokongg Blog</title>

  <link rel="stylesheet" href="/assets/css/style.css">
  <link rel="stylesheet" href="/assets/css/syntax-one-dark.css">
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Dokongg Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>
        <div class="trigger">
          <div>
            <div id="search" >
                <span id="searchform" method="post" action="/search/" class="">
    <div class="form-group">
        <input class="search-input" onkeyup="myFunc()" id="keyword" type="text" name="keyword" placeholder="Search..." />
    </div>
    <script src="/assets/js/jquery-3.6.0.min.js"></script>

    <script type="text/javascript">
        function myFunc() {
            var keyword = $("#keyword").val();

            if( keyword.trim() == '' ) {
              return;
            }
            if(event.keyCode == 13) {
                var url = encodeURIComponent(keyword);
                location.href = "/search?query=" + url;
            }
        }
    </script>
</span>

            </div>
          </div>
          
            <a class="page-link" href="/Algorithms/index">Algorithms</a>
          
            <a class="page-link" href="/CS/index">CS</a>
          
            <a class="page-link" href="/Java/index">Java</a>
          
            <a class="page-link" href="/Spring/index">Spring</a>
          
            <a class="page-link" href="/JPA/index">JPA</a>
          
            <a class="page-link" href="/ES/index">ES</a>
          
            <a class="page-link" href="/MSA/index">MSA</a>
          
        </div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h3 class="post-title p-name" itemprop="name headline">[Java] Lambda</h3>
    <p class="post-meta post-right"><time class="dt-published" datetime="2021-05-13T00:00:00+00:00" itemprop="datePublished">
        2021-05-13
      </time></p>
  </header>

  <div class="post-content e-content post-content-body" itemprop="articleBody">
    <ol>
  <li>
    <p><strong>Lambda</strong> <br />
1.1. Lambda란 <br />
1.2. Lambda의 장단점 <br />
1.3. Lambda의 기본식</p>
  </li>
  <li>
    <p><strong>타겟 타입(Target Type)</strong></p>
  </li>
  <li>
    <p><strong>함수형 인터페이스(functional Interface)</strong> <br />
3.1. 함수형 인터페이스란 <br />
3.2. 내장 함수형 인터페이스</p>
  </li>
  <li>
    <p><strong>메서드 레퍼런스(Method Reference</strong> <br />
4.1. 메서드 레퍼런스란 <br />
4.2. 메서드 레퍼런스의 종류</p>
  </li>
  <li>
    <p><strong>활용예시</strong></p>
  </li>
  <li>
    <p><strong>Stream</strong> <br />
6.1. Stream이란 <br />
6.2. Stream의 특징 <br />
6.3. 병렬처리</p>
  </li>
</ol>

<hr />

<h4 id="1-lambda"><strong>1. Lambda</strong></h4>
<h5 id="11-lambda란"><strong>1.1. Lambda란?</strong></h5>
<p>(1) Lambda의 정의</p>
<ul>
  <li>메서드를 하나의 식(Expression)으로 표현한 것</li>
  <li>익명 메서드(익명 함수, Anonymous functions) 생성 문</li>
  <li>메서드 자체로 혼자 선언하여 쓰일 수 없다.
    <ul>
      <li>무조건 Class 구성멤버로서 선언되어야 한다.</li>
    </ul>
  </li>
  <li>Lambda식을 통해 생성되는 것은 메서드 자체가 아닌 실행문(메서드)를 가진 객체이다.
    <ul>
      <li>일반적인 객체가 아닌 인터페이스를 구현한 익명구현객체를 생성한다.</li>
    </ul>
  </li>
</ul>

<p>(2) Lambda의 특징</p>
<ul>
  <li>익명 함수이므로, 이름을 가질 필요가 없다</li>
  <li>두 개 이상의 입력이 있는 함수는 최종적으로 1개의 입력만 받는 람다 대수로 단순화 될 수 있다(커링, Curring).</li>
</ul>

<blockquote>
  <p><strong>익명 함수(Anonymous functions)</strong></p>
  <ul>
    <li>이름이 없는 함수</li>
    <li>일급객체(First Class citizen)이라는 특징을 지님
      <ul>
        <li>일급객체
          <ul>
            <li>일반적으로 다른 객체들에 적용 가능한 연산을 모두 지원하는 객체를 말함</li>
            <li>함수를 값으로도 사용할 수 있고, 파라미터로 전달 및 변수에 대입하기 등의 연산이 가능</li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</blockquote>

<p>(3) interface와 익명 클래스</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">interface</span> <span class="nc">Calculator</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="nf">cal</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">);</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<ul>
  <li>Calculator라는 인터페이스는 cal()이라는 추상메서드를 가지고 있다.</li>
  <li>Calculator를 객체화하는 방법
    <ul>
      <li>implements한 class를 생성</li>
      <li>익명 클래스로 생성</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p><strong>인터페이스를 익명 클래스 방식으로 인스턴스화</strong></p>
  <ul>
    <li>인터페이스는 인터페이스 자체로 구현체(객체)를 만들 수 없지만, 인터페이스의 추상 메서드를 생성과 동시에 중괄호 {}로 감싼 곳에 <code class="language-plaintext highlighter-rouge">@Override</code>하여 구현할 수 있다.</li>
    <li>cal() 메서드를 가진 Calculator 인터페이스를 익명클래스 방식으로 인스턴스화</li>
  </ul>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Driver</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span>

    <span class="c1">// 생성과 동시에 구현할 메서드를 @Override함</span>
    <span class="nc">Calculator</span> <span class="n">cal</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Calculator</span><span class="o">()</span> <span class="o">{</span>
      <span class="nd">@Override</span>
      <span class="kt">int</span> <span class="nf">calc</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h5 id="12-lambda의-장단점"><strong>1.2. Lambda의 장단점</strong></h5>
<p>(1) Lambda의 장점</p>
<ul>
  <li>코드의 간결성
    <ul>
      <li>불필요한 반복문을 삭제할 수 있으며, 복잡한 식을 단순하게 표현할 수 있다.</li>
    </ul>
  </li>
  <li>지연연산 수행
    <ul>
      <li>지연연산을 수행함으로써 불필요한 연산을 최소화할 수 있다.</li>
    </ul>
  </li>
  <li>병렬처리 가능
    <ul>
      <li>멀티 스레드를 활용하여 병렬처리를 사용할 수 있다.</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p><strong>지연연산(지연실행, Lazy Evaluation)</strong></p>
  <ul>
    <li>코드를 바로 실행하지 않고 코드 실행이 필요할 때 실행하도록 하는 것</li>
    <li>불필요한 연산을 피할 수 있다.
      <ul>
        <li>별도의 스레드에서 코드를 실행</li>
        <li>코드를 여러 번 실행</li>
        <li>적절한 시점에 실행</li>
        <li>어떤 일(이벤트)이 발생했을 때 실행</li>
      </ul>
    </li>
  </ul>
</blockquote>

<p>(2) Lambda의 단점</p>
<ul>
  <li>호출이 까다롭다.</li>
  <li>Lambda의 stream을 사용했을 때, 단순 for문 혹은 while문을 사용하면 성능이 떨어진다.</li>
  <li>불필요하게 과도하게 사용하면 오히려 가독성이 떨어진다.</li>
</ul>

<h5 id="13-lambda의-기본식"><strong>1.3. Lambda의 기본식</strong></h5>
<p><code class="language-plaintext highlighter-rouge">(매개변수) -&gt; { 실행문 }</code></p>

<ul>
  <li>매개변수로 화살표(-&gt;) 함수 몸체로 이용하여 사용할 수 있다.</li>
  <li>매개변수의 타입을 자동으로 인식하기 때문에 변수 타입을 삭제할 수 있다.</li>
  <li>매개변수가 하나 일 때 ()를 생략할 수 있다.</li>
  <li>함수 몸체가 단일 실행문이면 중괄호 {}를 생략할 수 있다.</li>
  <li>함수 몸체가 return문으로만 구성되어 있는 경우 중괄호 {}를 생략할 수 없다.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Driver</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span>

    <span class="c1">// 1. (매개변수) -&gt; { 구현로직 }</span>
    <span class="nc">Calculator</span> <span class="n">cal1</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
    <span class="o">};</span>

    <span class="c1">// 2. 매개변수의 타입을 자동으로 인식하기 때문에 변수 타입을 삭제할 수 있다.</span>
    <span class="nc">Calculator</span> <span class="n">cal2</span> <span class="o">=</span> <span class="o">(</span><span class="n">n</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
    <span class="o">};</span>

    <span class="c1">// 3. 매개변수가 하나 일 때 ()를 생략할 수 있다.</span>
    <span class="c1">// (두 개 이상 혹은 없을 때에는 필요)</span>
    <span class="nc">Calculator</span> <span class="n">cal3</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-&gt;</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
    <span class="o">};</span>

    <span class="c1">// 4. 로직이 한 줄 안에 끝나는 경우 {}과 return을 제거할 수 있다.</span>
    <span class="nc">Calculator</span> <span class="n">cal4</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>람다식의 매개변수는 final 키워드가 붙지 않더라도 불변하는 상수로 취급한다.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Driver</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span>

    <span class="nc">Calculator</span> <span class="n">cal</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-&gt;</span> <span class="o">++</span><span class="n">n</span><span class="o">;</span>  <span class="c1">// ERROR! 매개변수를 변경시키려 했기 때문</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="2-타겟-타입target-type"><strong>2. 타겟 타입(Target type)</strong></h4>
<ul>
  <li>람다식이 대입되는 인터페이스 <br />
<code class="language-plaintext highlighter-rouge">인터페이스(타겟 타입) 변수 = 람다식;</code></li>
  <li>익명 구현 객체를 만들 때 사용할 인터페이스</li>
  <li>람다식에서 생성되는 익명구현객체는 기반이 되는 interface의 타입을 갖는다.
    <ul>
      <li>람다식의 타겟 타입은 Calculator이다.</li>
    </ul>
  </li>
</ul>

<h4 id="3-함수형-인터페이스functional-interface"><strong>3. 함수형 인터페이스(functional interface)</strong></h4>
<h5 id="31-함수형-인터페이스란"><strong>3.1. 함수형 인터페이스란</strong></h5>
<ul>
  <li>하나의 추상 메서드만 선언된 인터페이스
    <ul>
      <li>컴파일러는 람다식을 해석하여 자동으로 익명구현객체로 만든다. <br />
이 때, 람다식의 타겟 타입이 될 인터페이스는 컴파일러가 해당 람다식이 타겟 타입의 어떤 메서드를 구현한 것인지 알 수 없기 때문에 2개 이상의 추상 메서드를 가지면 안된다.</li>
    </ul>
  </li>
  <li>모든 인터페이스가 람다식의 타겟 타입이 될 수 있는 것은 아니다.
    <ul>
      <li>람다식은 하나의 메서드를 정의하기 때문에, 나의 추상 메서드가 선언된 인터페이스만 타겟 타입이 될 수 있다.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">@FunctionalInterface</code>
    <ul>
      <li>하나의 추상 메서드만을 가지는 지 컴파일러가 체크하도록 한다.
        <ul>
          <li>두 개 이상의 추상 메서드가 선언되어 있으면 컴파일 오류 발생</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nd">@FunctionalInterface</span>
<span class="kd">interface</span> <span class="nc">Calculator</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="nf">calc</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">);</span>
  <span class="kt">int</span> <span class="nf">sum</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">);</span>  <span class="c1">// ERROR!</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h5 id="32-내장-함수형-인터페이스"><strong>3.2. 내장 함수형 인터페이스</strong></h5>
<ul>
  <li>함수형 인터페이스는 개발자가 직접 만들어 사용할 수도 있지만, 자바에서 제공하는 표준 인터페이스를 사용해 람다식으로 구현할 수도 있다.
    <ul>
      <li>아래 코드의 IntBinaryOperator는 BinaryOperator 종류의 표준 함수형 인터페이스이다.</li>
      <li>IntBinaryOperator는 두 개의 정수를 매개변수로 받아 정수값을 리턴해주는 추상메서드 applyAsInt()를 갖고 있다.
        <ul>
          <li>람다식은 두 개의 정수를 매개변수로 받아 둘 중 큰 값을 반환해준다.</li>
          <li>기존의 Math 클래스의 max()를 사용해도 같은 결과를 얻을 수 있다.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="nc">IntBinaryOperator</span> <span class="n">op</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span> <span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">y</span><span class="o">;</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nc">IntBinaryOperator</span> <span class="n">op1</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="k">return</span> <span class="nc">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
<span class="o">}</span>
<span class="nc">IntBinaryOperator</span> <span class="n">op2</span> <span class="o">=</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="nc">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>(1) 기본 함수형 인터페이스</p>
<ul>
  <li>매개변수의 반환값 유무에 따라 존재</li>
</ul>

<p>Function과 Predicate의 차이는 반환 값이 boolean이라는 것만 다르고 Function과 동일 <br />
(T: 데이터 타입, R: 리턴 타입)</p>

<table>
  <thead>
    <tr>
      <th>함수형 인터페이스</th>
      <th>메서드</th>
      <th>매개변수</th>
      <th>반환값</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>java.lang.Runnable</td>
      <td>void run()</td>
      <td>X</td>
      <td>X</td>
    </tr>
    <tr>
      <td>Supplier<T></T></td>
      <td>T get()</td>
      <td>X</td>
      <td>O</td>
    </tr>
    <tr>
      <td>Consumer<T></T></td>
      <td>void accept(T t)</td>
      <td>O</td>
      <td>O</td>
    </tr>
    <tr>
      <td>Function&lt;T, R&gt;</td>
      <td>void accept(T t)</td>
      <td>O</td>
      <td>O</td>
    </tr>
    <tr>
      <td>Predicate<T></T></td>
      <td>boolean test(T t)</td>
      <td>O</td>
      <td>O</td>
    </tr>
  </tbody>
</table>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre><span class="c1">// Supplier</span>
<span class="nc">Supplier</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">supplier</span> <span class="o">=</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="s">"String"</span><span class="o">;</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">supplier</span><span class="o">.</span><span class="na">get</span><span class="o">());</span> <span class="c1">// String;</span>

<span class="c1">// Consumer</span>
<span class="nc">Consumer</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">consumer</span> <span class="o">=</span> <span class="o">(</span><span class="n">num</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">num</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
<span class="n">consumer</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span> <span class="c1">// 2</span>

<span class="c1">// Function</span>
<span class="nc">Function</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">function</span> <span class="o">=</span> <span class="o">(</span><span class="n">num</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">num</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">result1</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result1</span><span class="o">);</span>  <span class="c1">// 2</span>

<span class="c1">// Predicate</span>
<span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">predicate</span> <span class="o">=</span> <span class="o">(</span><span class="n">num</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">;</span>
<span class="kt">boolean</span> <span class="n">result2</span> <span class="o">=</span> <span class="n">predicate</span><span class="o">.</span><span class="na">test</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result2</span><span class="o">);</span>  <span class="c1">// true</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>(2) 매개변수가 두 개인 함수형 인터페이스</p>

<p>(T/U: 데이터 타입, R: 리턴 타입)</p>

<table>
  <thead>
    <tr>
      <th>함수형 인터페이스</th>
      <th>메서드</th>
      <th>매개변수</th>
      <th>반환값</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>BiConsumer&lt;T, U&gt;</td>
      <td>void accept(T t, U u)</td>
      <td>O</td>
      <td>O</td>
    </tr>
    <tr>
      <td>BiFunction&lt;T, U, R&gt;</td>
      <td>R apply(T t, U u)</td>
      <td>O</td>
      <td>O</td>
    </tr>
    <tr>
      <td>BiPredicate&lt;T, U&gt;</td>
      <td>boolean test(T t, U u)</td>
      <td>O</td>
      <td>O</td>
    </tr>
  </tbody>
</table>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="c1">// BiConsumer</span>
<span class="nc">BiConsumer</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">biConsumer</span> <span class="o">=</span> <span class="o">(</span><span class="n">num1</span><span class="o">,</span> <span class="n">num2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">num1</span> <span class="o">+</span> <span class="n">num2</span><span class="o">);</span>
<span class="n">biConsumer</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>  <span class="c1">// 3</span>

<span class="c1">// BiFunction</span>
<span class="nc">BiFunction</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">biFunction</span> <span class="o">=</span> <span class="o">(</span><span class="n">num1</span><span class="o">,</span> <span class="n">num2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">num1</span> <span class="o">+</span> <span class="n">num2</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">result1</span> <span class="o">=</span> <span class="n">biFunction</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result1</span><span class="o">);</span>  <span class="c1">// 3</span>

<span class="c1">// BiPredicate</span>
<span class="nc">BiPredicate</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">biPredicate</span> <span class="o">=</span> <span class="o">(</span><span class="n">num1</span><span class="o">,</span> <span class="n">num2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">num1</span> <span class="o">&gt;</span> <span class="n">num2</span><span class="o">;</span>
<span class="kt">boolean</span> <span class="n">result2</span> <span class="o">=</span> <span class="n">biPredicate</span><span class="o">.</span><span class="na">test</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result2</span><span class="o">);</span>  <span class="c1">// false</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p>(3) 매개변수 타입과 반환 타입이 일치하는 함수형 인터페이스</p>

<p>(T/U: 데이터 타입, R: 리턴 타입)</p>

<table>
  <thead>
    <tr>
      <th>함수형 인터페이스</th>
      <th>메서드</th>
      <th>매개변수</th>
      <th>반환값</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>UnaryOperator<T></T></td>
      <td>T apply(T t)</td>
      <td>O</td>
      <td>O</td>
    </tr>
    <tr>
      <td>BinaryOperator<T></T></td>
      <td>T apply(T t, T t)</td>
      <td>O</td>
      <td>O</td>
    </tr>
  </tbody>
</table>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="c1">// UnaryOperator</span>
<span class="nc">UnaryOperator</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">unaryOperator</span> <span class="o">=</span> <span class="o">(</span><span class="n">num</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">num</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">result1</span> <span class="o">=</span> <span class="n">unaryOperator</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result1</span><span class="o">);</span>  <span class="c1">// 1;</span>

<span class="c1">// BinaryOperator</span>
<span class="nc">BinaryOperator</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">binaryOperator</span> <span class="o">=</span> <span class="o">(</span><span class="n">num1</span><span class="o">,</span> <span class="n">num2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">num1</span> <span class="o">+</span> <span class="n">num2</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">result2</span> <span class="o">=</span> <span class="n">binaryOperator</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result2</span><span class="o">);</span>  <span class="c1">// 3</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="4-메서드-레퍼런스method-reference"><strong>4. 메서드 레퍼런스(Method Reference)</strong></h4>
<h5 id="41-메서드-레퍼런스란"><strong>4.1. 메서드 레퍼런스란</strong></h5>
<ul>
  <li>Lambda의 표현식을 더 간단하게 표현하는 방법
    <ul>
      <li>람다 표현식이 단 하나의 메서드를 호출하는 경우, 해당 람다 표현식에서 불필요한 매개변수를 제거하고 사용 할 수 있도록 해준다.</li>
    </ul>
  </li>
  <li>:: 기호를 사용하여 표현한다. <br />
<code class="language-plaintext highlighter-rouge">클래스 이름::메서드 이름</code> <br />
<code class="language-plaintext highlighter-rouge">참조변수 이름::메서드 이름</code></li>
  <li>이미 구현되어 있는 메서드를 참조해 매개변수의 정보와 리턴 타입을 알아내어 불필요한 매개변수를 제거하는 것이 목적이다.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nc">IntBinaryOperator</span> <span class="n">op1</span> <span class="o">=</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="nc">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
<span class="nc">IntBinaryOperator</span> <span class="n">op2</span> <span class="o">=</span> <span class="nl">Math:</span><span class="o">:</span><span class="n">max</span><span class="o">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="42-메서드-레퍼런스의-종류"><strong>4.2. 메서드 레퍼런스의 종류</strong></h4>
<ul>
  <li>정적 메서드, 인스턴스 메서드 참조</li>
  <li>매개변수의 메서드 참조</li>
  <li>생성자 참조</li>
</ul>

<p>(1) 정적 메서드, 인스턴스 메서드 참조</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nc">IntBinaryOperator</span> <span class="n">op</span> <span class="o">=</span> <span class="nl">Math:</span><span class="o">:</span><span class="n">max</span><span class="o">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>max()가 Math 클래스의 정적 메서드이기 때문에, 정적(static) 메서드 참조방식이 된다.</li>
  <li>인스턴스 메서드인 경우에는 인스턴스를 생성한 후에 <code class="language-plaintext highlighter-rouge">인스턴스::메서드명</code>으로 사용할 수 있다.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">MyMath</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">myMax</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span> <span class="o">?</span> <span class="n">x</span> <span class="o">:</span> <span class="n">y</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Driver</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">MyMath</span> <span class="n">myMath</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MyMath</span><span class="o">();</span>
    <span class="nc">IntBinaryOperator</span> <span class="n">op</span> <span class="o">=</span> <span class="nl">myMath:</span><span class="o">:</span><span class="n">myMax</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>(2) 매개변수의 메서드 참조 <br />
<code class="language-plaintext highlighter-rouge">매개변수 타입::메서드</code></p>
<ul>
  <li>매개변수로 받은 인자의 메서드를 참조하는 방식</li>
  <li>ToIntBiFunction은 Function 인터페이스 중 하나로서, 두 개의 매개변수를 받아 람다식의 로직을 사용하여 applyAsInt()를 사용했을 때 int 타입을 반환해주는 함수형 인터페이스이다.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Driver</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Integer</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>
    <span class="nc">Integer</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">7</span><span class="o">;</span>

    <span class="nc">ToIntBiFunction</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">func1</span> <span class="o">=</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">x</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">y</span><span class="o">);</span>

    <span class="nc">ToIntBiFunction</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">func2</span> <span class="o">=</span> <span class="nl">Integer:</span><span class="o">:</span><span class="n">compareTo</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>(3) 생성자 참조 <br />
<code class="language-plaintext highlighter-rouge">클래스명::new</code></p>
<ul>
  <li>생성자 또한 일종의 메서드이기 때문에 메서드 레퍼런스로 사용할 수 있다.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
  <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">age</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Person</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="nf">Person</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">Integer</span> <span class="n">age</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">age</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="s">"["</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">+</span> <span class="s">":"</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">+</span> <span class="s">"]"</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Driver</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Function</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Person</span><span class="o">&gt;</span> <span class="n">func1</span> <span class="o">=</span> <span class="nl">Person:</span><span class="o">:</span><span class="k">new</span><span class="o">;</span>
    <span class="c1">// 넘어오는 매개변수의 개수로 어떤 생성자를 호출할 지 찾아줌</span>
    <span class="nc">BiFunction</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">,</span> <span class="nc">Person</span><span class="o">&gt;</span> <span class="n">func2</span> <span class="o">=</span> <span class="nl">Person:</span><span class="o">:</span><span class="k">new</span><span class="o">;</span>

    <span class="n">func1</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="s">"Dom"</span><span class="o">);</span>
    <span class="n">func2</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="s">"Dom, 28"</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="5-활용예시"><strong>5. 활용예시</strong></h4>
<ul>
  <li>자바에서 변수의 역할을 할 수 있는 것은 Primitive 타입(int, long, boolean 등)과 Object 타입이다.
    <ul>
      <li>람다식을 만들 수 있는 타겟 타입도 변수가 될 수 있으므로, 람다식과 활용하면 메소드도 매개변수처럼 사용할 수 있다.</li>
      <li>메소드를 구현한 함수적 인터페이스를 변수로 사용하는 것</li>
    </ul>
  </li>
  <li>함수적 인터페이스 <code class="language-plaintext highlighter-rouge">Calculator</code> 와 정수 n을 매개변수로 받아 calc()의 실행 결과를 출력해주는 printCalc()라는 메소드가 있다.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">printCalc</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">,</span> <span class="nc">Calculator</span> <span class="n">cal</span><span class="o">)</span> <span class="o">{</span>
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">cal</span><span class="o">.</span><span class="na">calc</span><span class="o">(</span><span class="n">n</span><span class="o">));</span>
<span class="o">}</span>

<span class="nd">@FunctionalInterface</span>
<span class="kd">interface</span> <span class="nc">Calculator</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="nf">calc</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Driver</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span>
    <span class="n">printCalc</span><span class="o">(</span><span class="n">n</span><span class="o">,</span> <span class="n">v</span> <span class="o">-&gt;</span> <span class="n">v</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span> <span class="c1">// 3</span>
    <span class="n">printCalc</span><span class="o">(</span><span class="n">n</span><span class="o">,</span> <span class="n">v</span> <span class="o">-&gt;</span> <span class="n">v</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span> <span class="c1">// 1</span>
    <span class="n">printCalc</span><span class="o">(</span><span class="n">n</span><span class="o">,</span> <span class="n">v</span> <span class="o">-&gt;</span> <span class="n">v</span> <span class="o">*</span> <span class="mi">2</span><span class="o">);</span> <span class="c1">// 4</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">printCalc</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">,</span> <span class="nc">Calculator</span> <span class="n">cal</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">cal</span><span class="o">.</span><span class="na">calc</span><span class="o">(</span><span class="n">n</span><span class="o">));</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="6-stream"><strong>6. Stream</strong></h4>
<h5 id="61-stream이란"><strong>6.1. Stream이란</strong></h5>
<ul>
  <li>컬렉션(Collection)의 요소를 하나씩 참조하여 람다식으로 처리할 수 있게 해주는 일종의 반복자</li>
</ul>

<blockquote>
  <p><strong>Java의 Collection과 Iterator</strong></p>

  <p><img src="https://www.javatpoint.com/images/java-collection-hierarchy.png" alt="Alt Text" /></p>

  <ul>
    <li>자바의 <code class="language-plaintext highlighter-rouge">Collection</code> 인터페이스는 Set, List, Queue 인터페이스 처럼 데이터를 저장하는 자료구조들의 상위에 있는 인터페이스이다.
      <ul>
        <li>최상위에는 iterator() 메소드를 갖고 있는 Iterable 인터페이스가 있다.</li>
      </ul>
    </li>
    <li>Collection을 implements한 모두 자료 구조들은 iterator()로 반복자를 만들어 반복문을 돌릴 수 있다.
      <ul>
        <li>iterator()는 Iterator<T>를 반환한다.</T></li>
        <li>hasNext() 메소드와 next() 메소드를 갖고 있다.
          <ul>
            <li>hasNext(): 자료 안에 자료가 있는지 없는지 확인</li>
            <li>next(): 자료구조에 저장되어 있는 자료를 하나씩 리턴</li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Driver</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">);</span>

    <span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">stream</span> <span class="o">=</span> <span class="n">list</span><span class="o">.</span><span class="na">stream</span><span class="o">();</span>

    <span class="n">stream</span><span class="o">.</span><span class="na">forEach</span><span class="o">((</span><span class="nc">Integer</span> <span class="n">i</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
    <span class="o">});</span>

    <span class="n">list</span><span class="o">.</span><span class="na">steam</span><span class="o">().</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h5 id="62-stream의-특징"><strong>6.2. Stream의 특징</strong></h5>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Parser</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="nf">strToIntList</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">strList</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">strList</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
            <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">Integer:</span><span class="o">:</span><span class="n">parseInt</span><span class="o">)</span>
            <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
  <span class="o">}</span>
<span class="o">}</span>
<span class="kd">class</span> <span class="nc">Driver</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">strList</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">((</span><span class="s">"1,2,3,4,5,6"</span><span class="o">).</span><span class="na">split</span><span class="o">(</span><span class="s">","</span><span class="o">));</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">intList</span> <span class="o">=</span> <span class="nc">Parser</span><span class="o">.</span><span class="na">strToIntList</span><span class="o">(</span><span class="n">strList</span><span class="o">);</span>

    <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">intList</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">mapToInt</span><span class="o">(</span><span class="nl">Integer:</span><span class="o">:</span><span class="n">intValue</span><span class="o">).</span><span class="na">sum</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>(1) 람다식을 사용할 수 있다.</p>
<ul>
  <li>표준 함수형 인터페이스가 모두 포함된다.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">strList</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">((</span><span class="s">"1,2,3,4,5,6"</span><span class="o">).</span><span class="na">split</span><span class="o">(</span><span class="s">","</span><span class="o">));</span>

<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">intList1</span> <span class="o">=</span> <span class="nc">Parser</span><span class="o">.</span><span class="na">strToIntList</span><span class="o">(</span><span class="n">strList</span><span class="o">);</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">intList2</span> <span class="o">=</span> <span class="n">strList</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">map</span><span class="o">(</span><span class="nl">Integer:</span><span class="o">:</span><span class="n">parseInt</span><span class="o">).</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<ul>
  <li>설명
    <ul>
      <li>Collection은 <code class="language-plaintext highlighter-rouge">.stream()</code>을 사용하여 <code class="language-plaintext highlighter-rouge">Stream</code>타입의 객체로 바꿔줄 수 있다.</li>
      <li><code class="language-plaintext highlighter-rouge">map()</code>은 Function&lt;T, R&gt; 함수적 인터페이스(람다식)를 매개변수로 받아 Stream의 데이터를 하나씩 람다식으로 처리하여 다시 Stream 객체에 담는다.</li>
      <li><code class="language-plaintext highlighter-rouge">collect()</code>는 스트림의 데이터를 모아 새로운 객체를 만들어 리턴한다. 상단의 코드에선 <code class="language-plaintext highlighter-rouge">Collectors.toList()</code>를 사용해서 <code class="language-plaintext highlighter-rouge">List</code> 객체를 만들어 리턴한다.</li>
    </ul>
  </li>
  <li>객체 스트림(Stream<T>) 이 외에도 기본 타입에 특화된 기본 타입 스트림 라이브러리를 갖고 있다.</T></li>
</ul>

<table>
  <thead>
    <tr>
      <th>리턴타입</th>
      <th>메서드(매개변수)</th>
      <th>소스</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Stream<T></T></td>
      <td>java.util.Collection.stream()</td>
      <td>컬렉션</td>
    </tr>
    <tr>
      <td>Stream<br />IntStream<br />LongStream<br />DoubleStream</td>
      <td>Arrays.stream(T[]), Stream.of(T[])<br />Arrays.stream(int[]), IntStream.of(int[])<br />Arrays.stream(long[]), LongStream.of(long[])<br />Arrays.stream(double[]), DoubleStream.of(double[])</td>
      <td>배열</td>
    </tr>
    <tr>
      <td>IntStream</td>
      <td>IntStream.range(long, long)<br />LongStream.rangeClosed(int, int)</td>
      <td>int 범위</td>
    </tr>
    <tr>
      <td>LongStream</td>
      <td>LongStream.range(long, long)<br />LongStream.rangeClosed(long, long)</td>
      <td>long 범위</td>
    </tr>
    <tr>
      <td>Stream<Path></Path></td>
      <td>Files.find(Path, int, BiPredicate, FileVisitOption)<br />Files.list(Path)</td>
      <td>디렉토리</td>
    </tr>
    <tr>
      <td>Stream<String></String></td>
      <td>Files.lines(Path, Charset)<br />BufferedReader.lines()</td>
      <td>파일</td>
    </tr>
    <tr>
      <td>DoubleStream<br />IntStream<br />LongStream</td>
      <td>Random.doubles(…)<br />Random.ints()<br />Random.longs()</td>
      <td>랜덤 수</td>
    </tr>
  </tbody>
</table>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">intList</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">mapToInt</span><span class="o">(</span><span class="nl">Integer:</span><span class="o">:</span><span class="n">intValue</span><span class="o">).</span><span class="na">sum</span><span class="o">();</span>

</pre></td></tr></tbody></table></code></pre></div></div>
<ul>
  <li>설명
 IntStream에 스트림의 모든 값을 더해주는 <code class="language-plaintext highlighter-rouge">sum()</code>이 있기 때문에, <code class="language-plaintext highlighter-rouge">intList</code>를 IntStream으로 바꾸어 사용해야 한다.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">IntStream.of()</code>로 직접 생성과 초기화하여 <code class="language-plaintext highlighter-rouge">IntStream</code>으로 만드는 방법도 있지만, <code class="language-plaintext highlighter-rouge">mapToInt()</code>로 기본 스트림을 IntStream으로 바꿔줄 수 있다.</li>
    </ul>
  </li>
</ul>

<p>(2) 중간/단말연산을 갖고 있다.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Driver</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">strList</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">((</span><span class="s">"1,2,3,4,5,6"</span><span class="o">).</span><span class="na">split</span><span class="o">(</span><span class="s">","</span><span class="o">));</span>

    <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">strList</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">mapToInt</span><span class="o">(</span><span class="nl">Integer:</span><span class="o">:</span><span class="n">parseInt</span><span class="o">).</span><span class="na">sum</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>중간연산
    <ul>
      <li>계속 스트림을 반환하며 연산을 이어서 할 수 있게 한다.</li>
      <li><code class="language-plaintext highlighter-rouge">Stream</code> 객체를 다시 가공해서 <code class="language-plaintext highlighter-rouge">Stream</code> 객체로 만드는 연산을 한다.</li>
      <li>중간 연산자들은 연속해서 사용할 수 있고, 중간 연산 이후에는 다른 스트림이 반환된다.
        <ul>
          <li>원본인 <code class="language-plaintext highlighter-rouge">strList</code>의 <code class="language-plaintext highlighter-rouge">Collection</code> 값들은 바뀌지 않는다.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<table>
  <thead>
    <tr>
      <th>연산</th>
      <th>반환값</th>
      <th>연산 인수</th>
      <th>함수 디스크립터</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>filter</td>
      <td>Stream<T></T></td>
      <td>Predicator<T></T></td>
      <td>T -&gt; boolean</td>
    </tr>
    <tr>
      <td>map</td>
      <td>Stream<T></T></td>
      <td>Function&lt;T, R&gt;</td>
      <td>T -&gt; R</td>
    </tr>
    <tr>
      <td>limit</td>
      <td>Stream<T></T></td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>sorted</td>
      <td>Stream<T></T></td>
      <td>Comparator<T></T></td>
      <td>(T, T) -&gt; int</td>
    </tr>
    <tr>
      <td>distinct</td>
      <td>Stream<T></T></td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">strList</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"3"</span><span class="o">,</span> <span class="s">"1"</span><span class="o">,</span> <span class="s">"4"</span><span class="o">,</span> <span class="s">"2"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">);</span>

<span class="n">strList</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>  <span class="c1">// 문자열 스트림 생성</span>
  <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">Integer:</span><span class="o">:</span><span class="n">parseInt</span><span class="o">)</span> <span class="c1">// 문자열 스트림을 정수형 스트림으로 반환 =&gt; {3, 1, 4, 2, 5, 5}</span>
  <span class="o">.</span><span class="na">sorted</span><span class="o">()</span> <span class="c1">// 정렬 =&gt; {1, 2, 3, 4, 5, 5}</span>
  <span class="o">.</span><span class="na">distinct</span><span class="o">()</span> <span class="c1">// 중복제거 =&gt; {1, 2, 3, 4, 5}</span>
  <span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span> <span class="c1">// 개수를 3개로 제한 =&gt; {1, 2, 3}</span>
  <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span> <span class="c1">// List로 변환</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p><strong>설명</strong></p>

  <ul>
    <li>map
      <ul>
        <li>각각의 엘리먼트를 변경하여 새로운 컨텐츠를 생성하는 기능</li>
        <li>입력 컬렉션을 출력 컬렉션으로 매핑하거나 변경</li>
      </ul>
    </li>
  </ul>

  <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">names</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"A"</span><span class="o">,</span> <span class="s">"B"</span><span class="o">,</span> <span class="s">"C"</span><span class="o">);</span>

<span class="c1">// java7</span>
<span class="k">for</span> <span class="o">(</span> <span class="n">string</span> <span class="n">name</span> <span class="o">:</span> <span class="n">names</span> <span class="o">)</span> <span class="o">{</span>
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span><span class="o">.</span><span class="na">toUpperCase</span><span class="o">());</span>
<span class="o">}</span>
<span class="c1">// java8</span>
<span class="n">names</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
    <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">name</span> <span class="o">-&gt;</span> <span class="n">name</span><span class="o">.</span><span class="na">toUpperCase</span><span class="o">()</span> <span class="o">)</span>
    <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">name</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span><span class="o">));</span>
</pre></td></tr></tbody></table></code></pre></div>  </div>

  <ul>
    <li>filter
      <ul>
        <li>엘리먼트 선택</li>
        <li>컬렉션을 조건에 의해 선택</li>
        <li>boolean 결과를 리턴하는 람다표현식이 필요하다.</li>
      </ul>
    </li>
  </ul>

  <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">names</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"A"</span><span class="o">,</span> <span class="s">"B"</span><span class="o">,</span> <span class="s">"C"</span><span class="o">);</span>

<span class="c1">// java7</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;():</span>
<span class="k">for</span> <span class="o">(</span> <span class="nc">String</span> <span class="n">name</span> <span class="o">:</span> <span class="n">names</span> <span class="o">)</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span> <span class="n">names</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">"S"</span><span class="o">)</span> <span class="o">)</span> <span class="o">{</span>
    <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// java8</span>
<span class="n">list</span> <span class="o">=</span> <span class="n">names</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
            <span class="o">.</span><span class="na">filter</span><span class="o">(</span> <span class="n">name</span> <span class="o">-&gt;</span> <span class="n">name</span><span class="o">.</span><span class="na">startsWitch</span><span class="o">(</span><span class="s">"S"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">()));</span>
</pre></td></tr></tbody></table></code></pre></div>  </div>

  <ul>
    <li>reduce()
      <ul>
        <li>엘리먼트를 비교하고 컬렉션에서 하나의 값으로 연산한다.</li>
      </ul>
    </li>
  </ul>

  <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">names</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"A"</span><span class="o">,</span> <span class="s">"B"</span><span class="o">,</span> <span class="s">"C"</span><span class="o">);</span>

<span class="c1">// java7</span>
<span class="nc">String</span> <span class="n">str</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>
<span class="k">for</span> <span class="o">(</span> <span class="nc">String</span> <span class="n">name</span> <span class="o">:</span> <span class="n">names</span> <span class="o">)</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span> <span class="o">(</span><span class="s">"honne"</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&lt;</span> <span class="n">names</span><span class="o">.</span><span class="na">length</span><span class="o">())</span>
      <span class="o">&amp;&amp;</span> <span class="o">(</span> <span class="n">str</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&lt;=</span> <span class="n">name</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">)</span> <span class="o">)</span> <span class="o">{</span>
      <span class="n">str</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//java8</span>
<span class="n">str</span> <span class="o">=</span> <span class="n">names</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
            <span class="o">.</span><span class="na">reduce</span><span class="o">(</span> <span class="s">"hoone"</span><span class="o">,</span> <span class="o">(</span><span class="n">name1</span><span class="o">,</span> <span class="n">name2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
              <span class="n">name1</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&gt;=</span> <span class="n">nam2</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">?</span> <span class="n">name1</span> <span class="o">:</span> <span class="n">name2</span> <span class="o">);</span>
            <span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div>  </div>
</blockquote>

<blockquote>
  <p><strong>map과 flatMap</strong></p>
  <ul>
    <li>map은 스트림의 스트림을 반환하는 반면, flatMap은 스트림을 반환한다.
      <ul>
        <li>스트림의 형태가 배열이거나 또는 입력된 값을 또 다시 스트림의 형태로 반환하고자 할 때는 flatMap이 유용하다.</li>
      </ul>
    </li>
  </ul>

  <p>(1) Map</p>
  <ul>
    <li>단일 스트림 안의 요소를 원하는 특정 형태로 변환할 수 있다.</li>
  </ul>

  <p>(2) FlatMap</p>
  <ul>
    <li>스트림의 형태가 배열과 같을 때, 모든 원소를 단일 원소 스트림으로 반환할 수 있다.</li>
    <li>여러 개의 스트림을 한 개의 스트림으로 합쳐준다.</li>
    <li>복잡한 스트림을 간단한 스트림으로 변경하는 데 사용할 수 있다.</li>
    <li><code class="language-plaintext highlighter-rouge">flatMap</code>의 결과로 단일 원소 스트림을 반환하기 때문에 <code class="language-plaintext highlighter-rouge">filter</code> 메서드를 바로 체이닝하여 사용할 수 있다.</li>
    <li>초기에 생성된 스트림이 배열인 경우에 매우 유용하다.</li>
  </ul>

  <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="nc">String</span><span class="o">[][]</span> <span class="n">arrays</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[][]</span> <span class="o">{</span> <span class="o">{</span><span class="s">"a1"</span><span class="o">,</span> <span class="s">"a2"</span><span class="o">}</span>
                                  <span class="o">,</span> <span class="o">{</span><span class="s">"b1"</span><span class="o">,</span> <span class="s">"b2"</span><span class="o">}</span>
                                  <span class="o">,</span> <span class="o">{</span><span class="s">"c1"</span><span class="o">,</span> <span class="s">"c2"</span><span class="o">,</span> <span class="s">"c3"</span><span class="o">}</span> <span class="o">};</span>

<span class="nc">Set</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">arraysWithFlatMap</span>
  <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">arrays</span><span class="o">)</span>
          <span class="o">.</span><span class="na">flatMap</span><span class="o">(</span> <span class="n">innerArray</span> <span class="o">-&gt;</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">innerArray</span><span class="o">)</span> <span class="o">)</span>
          <span class="o">.</span><span class="na">filter</span><span class="o">(</span> <span class="n">v</span> <span class="o">-&gt;</span> <span class="n">v</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="o">)</span>
          <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toSet</span><span class="o">());</span>
</pre></td></tr></tbody></table></code></pre></div>  </div>

  <p>(3) Map과 flatMap의 비교 예시(1)</p>

  <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="nc">String</span><span class="o">[][]</span> <span class="n">arrays</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[][]</span> <span class="o">{</span> <span class="o">{</span><span class="s">"a1"</span><span class="o">,</span> <span class="s">"a2"</span><span class="o">}</span>
                                  <span class="o">,</span> <span class="o">{</span><span class="s">"b1"</span><span class="o">,</span> <span class="s">"b2"</span><span class="o">}</span>
                                  <span class="o">,</span> <span class="o">{</span><span class="s">"c1"</span><span class="o">,</span> <span class="s">"c2"</span><span class="o">,</span> <span class="s">"c3"</span><span class="o">}</span> <span class="o">};</span>

<span class="nc">Set</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">arraysWithFlatMap</span>
  <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">arrays</span><span class="o">)</span>
          <span class="o">.</span><span class="na">flatMap</span><span class="o">(</span> <span class="n">innerArray</span> <span class="o">-&gt;</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">innerArray</span><span class="o">)</span> <span class="o">)</span>
          <span class="o">.</span><span class="na">filter</span><span class="o">(</span> <span class="n">v</span> <span class="o">-&gt;</span> <span class="n">v</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="o">)</span>
          <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toSet</span><span class="o">());</span>

<span class="nc">Set</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">arraysWithMap</span>
  <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">arrays</span><span class="o">)</span>
          <span class="o">.</span><span class="na">map</span><span class="o">(</span> <span class="n">innerArray</span> <span class="o">-&gt;</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">innerArray</span><span class="o">)</span>
                                    <span class="o">.</span><span class="na">filter</span><span class="o">(</span> <span class="n">name</span> <span class="o">-&gt;</span> <span class="n">name</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="o">)</span>
                                    <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collector</span><span class="o">.</span><span class="na">toSet</span><span class="o">())</span> <span class="o">)</span>
          <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nl">HashSet:</span><span class="o">:</span><span class="k">new</span><span class="o">,</span> <span class="nl">Set:</span><span class="o">:</span><span class="n">addAll</span><span class="o">(),</span> <span class="nl">Set:</span><span class="o">:</span><span class="n">addAll</span><span class="o">);</span>
</pre></td></tr></tbody></table></code></pre></div>  </div>

  <p>(4) Map과 flatMap의 비교 예시(2)</p>

  <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="nc">String</span><span class="o">[][]</span> <span class="n">namesArray</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[][]</span> <span class="o">{</span>
  <span class="o">{</span><span class="s">"kim"</span><span class="o">,</span> <span class="s">"taeng"</span><span class="o">},</span> <span class="o">{</span><span class="s">"mad"</span><span class="o">,</span> <span class="s">"play"</span><span class="o">}</span> <span class="o">};</span>

<span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">namesArray</span><span class="o">)</span>
      <span class="o">.</span><span class="na">flatMatp</span><span class="o">(</span> <span class="n">inner</span> <span class="o">-&gt;</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">strem</span><span class="o">(</span><span class="n">inner</span><span class="o">)</span> <span class="o">)</span>
      <span class="o">.</span><span class="na">filter</span><span class="o">(</span> <span class="n">name</span> <span class="o">-&gt;</span> <span class="n">name</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"taeng"</span><span class="o">)</span> <span class="o">)</span>
      <span class="o">.</span><span class="na">forEach</span><span class="o">(</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span> <span class="o">);</span>

<span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">namesArray</span><span class="o">)</span>
      <span class="o">.</span><span class="na">map</span><span class="o">(</span> <span class="n">inner</span> <span class="o">-&gt;</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">inner</span><span class="o">)</span> <span class="o">)</span>
      <span class="o">.</span><span class="na">forEach</span><span class="o">(</span> <span class="n">names</span> <span class="o">-&gt;</span> <span class="n">names</span><span class="o">.</span><span class="na">filter</span><span class="o">(</span> <span class="n">name</span> <span class="o">-&gt;</span> <span class="n">name</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"taeng"</span><span class="o">))</span>
                              <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">));</span>
</pre></td></tr></tbody></table></code></pre></div>  </div>
  <ul>
    <li><code class="language-plaintext highlighter-rouge">flatMap</code>은 결과를 가지고 바로 <code class="language-plaintext highlighter-rouge">forEach</code> 메서드를 체이닝하여 모든 요소를 출력할 수 있다.</li>
    <li><code class="language-plaintext highlighter-rouge">map</code>은 단일 요소로 리턴되기 때문에 <code class="language-plaintext highlighter-rouge">map</code>의 결과를 가지고 <code class="language-plaintext highlighter-rouge">forEach</code> 메서드로 loop를 진행한 후, 그 내부에서 다시 한 번 <code class="language-plaintext highlighter-rouge">forEach</code> 메서드를 체이닝하여 사용해야 한다.</li>
  </ul>

  <p>(5) Map과 flatMap의 비교 예시(3)</p>

  <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="nc">String</span><span class="o">[][]</span> <span class="n">namesArray</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[][]</span> <span class="o">{</span>
  <span class="o">{</span><span class="s">"kim"</span><span class="o">,</span> <span class="s">"taeng"</span><span class="o">},</span> <span class="o">{</span><span class="s">"mad"</span><span class="o">,</span> <span class="s">"play"</span><span class="o">}</span> <span class="o">};</span>

<span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">namesArray</span><span class="o">)</span>
      <span class="o">.</span><span class="na">flatMap</span><span class="o">(</span> <span class="n">inner</span> <span class="o">-&gt;</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">inner</span><span class="o">)</span> <span class="o">)</span>
      <span class="o">.</span><span class="na">forEach</span><span class="o">(</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span> <span class="o">);</span>

<span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">namesArray</span><span class="o">)</span>
      <span class="o">.</span><span class="na">map</span><span class="o">(</span> <span class="n">inner</span> <span class="o">-&gt;</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">inner</span><span class="o">)</span> <span class="o">)</span>
      <span class="o">.</span><span class="na">forEach</span><span class="o">(</span> <span class="n">names</span> <span class="o">-&gt;</span> <span class="n">names</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span> <span class="o">));</span>
</pre></td></tr></tbody></table></code></pre></div>  </div>
</blockquote>

<blockquote>
  <p><strong><code class="language-plaintext highlighter-rouge">collect</code></strong></p>
  <ul>
    <li>reduce() 메서드와 동일하게 값을 하나로 모으는 형태</li>
    <li>여러 편의 메서드를 제공한다.</li>
  </ul>

  <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">names</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"A"</span><span class="o">,</span> <span class="s">"B"</span><span class="o">,</span> <span class="s">"c"</span><span class="o">);</span>

<span class="c1">// java7</span>
<span class="k">for</span> <span class="o">(</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">names</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">++</span> <span class="o">)</span> <span class="o">{</span>
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">names</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">).</span><span class="na">toUpperCase</span><span class="o">()</span> <span class="o">+</span> <span class="s">", "</span> <span class="o">);</span>
<span class="o">}</span>
<span class="k">if</span> <span class="o">(</span> <span class="n">names</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">)</span> <span class="o">{</span>
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">names</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">names</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">).</span><span class="na">toUpperCase</span><span class="o">()</span> <span class="o">);</span>
<span class="o">}</span>

<span class="c1">// java8</span>
<span class="nc">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">names</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                  <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">String:</span><span class="o">:</span><span class="n">toUpperCase</span><span class="o">)</span>
                  <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">(</span><span class="s">", "</span><span class="o">));</span>
</pre></td></tr></tbody></table></code></pre></div>  </div>

  <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="o">&lt;</span><span class="no">R</span><span class="o">&gt;</span> <span class="no">R</span> <span class="nf">collect</span><span class="o">(</span><span class="nc">Supplier</span><span class="o">&lt;</span><span class="no">R</span><span class="o">&gt;</span> <span class="n">supplier</span>
            <span class="o">,</span> <span class="nc">BiConsumer</span><span class="o">&lt;</span><span class="no">R</span><span class="o">,</span> <span class="o">?</span> <span class="kd">super</span> <span class="no">T</span> <span class="n">accumulator</span>
            <span class="o">,</span> <span class="nc">BiConsumer</span><span class="o">&lt;</span><span class="no">R</span><span class="o">,</span> <span class="no">R</span><span class="o">&gt;</span> <span class="n">combiner</span><span class="o">);</span>
</pre></td></tr></tbody></table></code></pre></div>  </div>

  <ul>
    <li><code class="language-plaintext highlighter-rouge">supplier</code>: 새로운 결과 컨테이너를 생성</li>
    <li><code class="language-plaintext highlighter-rouge">accumulator</code>: 결과에 추가 요소를 통합하기 위한 역할</li>
    <li><code class="language-plaintext highlighter-rouge">combiner</code>: 계산 결과를 결합하는 역할</li>
  </ul>

  <p>(2) <code class="language-plaintext highlighter-rouge">Collector</code>를 직접 정의하는 경우</p>
  <ul>
    <li><code class="language-plaintext highlighter-rouge">Collector.of</code> 메서드를 이용
      <ul>
        <li><code class="language-plaintext highlighter-rouge">combiner</code>의 형태는 <code class="language-plaintext highlighter-rouge">BinaryOperator</code>이다.</li>
      </ul>
    </li>
  </ul>

  <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nc">Set</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">arraysWithMap</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">arrays</span><span class="o">)</span>
          <span class="o">.</span><span class="na">map</span><span class="o">(</span> <span class="n">innerArray</span> <span class="o">-&gt;</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">innerArray</span><span class="o">)</span>
                                    <span class="o">.</span><span class="na">filter</span><span class="o">(</span> <span class="n">name</span> <span class="o">-&gt;</span> <span class="n">name</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="o">)</span>
                                    <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collector</span><span class="o">.</span><span class="na">toSet</span><span class="o">())</span> <span class="o">)</span>
          <span class="o">.</span><span class="na">collect</span><span class="o">(</span> <span class="nc">Collector</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nl">HashSet:</span><span class="o">:</span><span class="k">new</span><span class="o">,</span> <span class="nl">Set:</span><span class="o">:</span><span class="n">addAll</span><span class="o">,</span> <span class="o">(</span><span class="n">oldValue</span><span class="o">,</span> <span class="n">newValue</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">oldValue</span><span class="o">)</span> <span class="o">);</span>
</pre></td></tr></tbody></table></code></pre></div>  </div>
</blockquote>

<ul>
  <li>단말연산
    <ul>
      <li>스트림을 종료시키고 결과를 반환한다.</li>
      <li>스트림을 받아 결과값을 만들고 더 이상 스트림을 반환하지 않는다(스트림을 닫는다).
        <ul>
          <li>만약 연산을 계속 이어 하고 싶다면, 스트림을 다시 만들어 작업을 이어가야 한다.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<table>
  <thead>
    <tr>
      <th>연산</th>
      <th>설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>forEach</td>
      <td>스트림에 각 요소를 람다를 통해 특정 작업을 실행한다.</td>
    </tr>
    <tr>
      <td>count</td>
      <td>스트림의 요소 개수를 반환한다(long).</td>
    </tr>
    <tr>
      <td>collect</td>
      <td>스트림을 컬렉션 형태로 반환한다.</td>
    </tr>
  </tbody>
</table>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"3"</span><span class="o">,</span> <span class="s">"1"</span><span class="o">,</span> <span class="s">"4"</span><span class="o">,</span> <span class="s">"2"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">)</span>
      <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">Integer:</span><span class="o">:</span><span class="n">parseInt</span><span class="o">)</span>
      <span class="o">.</span><span class="na">sorted</span><span class="o">()</span>
      <span class="o">.</span><span class="na">distinct</span><span class="o">()</span>
      <span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span>
      <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">())</span>
      <span class="o">.</span><span class="na">stream</span><span class="o">()</span>
      <span class="o">.</span><span class="na">filter</span><span class="o">(</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">)</span>
      <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>연산의 순서
    <ul>
      <li>스트림은 지연된(lazy) 연산을 수행한다.</li>
      <li>단말 연산이 없으면 연산을 실행하지 않고, 단말 연산이 수행되기 전에는 중간연산은 실행되지 않는다.
        <ul>
          <li>결과가 필요하기 전까지 실행되지 않는다.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"3"</span><span class="o">,</span> <span class="s">"1"</span><span class="o">,</span> <span class="s">"4"</span><span class="o">,</span> <span class="s">"2"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">)</span>
      <span class="o">.</span><span class="na">map</span><span class="o">(</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"map: "</span> <span class="o">+</span> <span class="n">x</span><span class="o">);</span>
        <span class="k">return</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
      <span class="o">})</span>
      <span class="o">.</span><span class="na">filter</span><span class="o">(</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"filter: "</span> <span class="o">+</span> <span class="n">x</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">;</span>
      <span class="o">})</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>(단말 연산이 없기 때문에 아래 코드는 아무 것도 출력되지 않는다.)</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"3"</span><span class="o">,</span> <span class="s">"1"</span><span class="o">,</span> <span class="s">"4"</span><span class="o">,</span> <span class="s">"2"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">)</span>
      <span class="o">.</span><span class="na">map</span><span class="o">(</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"map: "</span> <span class="o">+</span> <span class="n">x</span><span class="o">);</span>
        <span class="k">return</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
      <span class="o">})</span>
      <span class="o">.</span><span class="na">filter</span><span class="o">(</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"filter: "</span> <span class="o">+</span> <span class="n">x</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">;</span>
      <span class="o">})</span>
      <span class="o">.</span><span class="na">forEach</span><span class="o">(</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"forEach: "</span> <span class="o">+</span> <span class="n">x</span><span class="o">);</span>
      <span class="o">})</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>(아래와 같은 결과로 출력된다.)</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre><span class="nx">map</span> <span class="p">:</span> <span class="mi">3</span>   
<span class="nx">filter</span> <span class="p">:</span> <span class="mi">3</span>   
<span class="nx">forEach</span> <span class="p">:</span> <span class="mi">3</span>   
<span class="nx">map</span> <span class="p">:</span> <span class="mi">1</span>   
<span class="nx">filter</span> <span class="p">:</span> <span class="mi">1</span>   
<span class="nx">map</span> <span class="p">:</span> <span class="mi">4</span>   
<span class="nx">filter</span> <span class="p">:</span> <span class="mi">4</span>   
<span class="nx">forEach</span> <span class="p">:</span> <span class="mi">4</span>   
<span class="nx">map</span> <span class="p">:</span> <span class="mi">2</span>   
<span class="nx">filter</span> <span class="p">:</span> <span class="mi">2</span>   
<span class="nx">forEach</span> <span class="p">:</span> <span class="mi">2</span>   
<span class="nx">map</span> <span class="p">:</span> <span class="mi">5</span>   
<span class="nx">filter</span> <span class="p">:</span> <span class="mi">5</span>   
<span class="nx">forEach</span> <span class="p">:</span> <span class="mi">5</span>   
<span class="nx">map</span> <span class="p">:</span> <span class="mi">5</span>   
<span class="nx">filter</span> <span class="p">:</span> <span class="mi">5</span>   
<span class="nx">forEach</span> <span class="p">:</span> <span class="mi">5</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h5 id="63-병렬처리"><strong>6.3. 병렬처리</strong></h5>
<ul>
  <li>스트림은 <code class="language-plaintext highlighter-rouge">parallel()</code>을 활용해 연산을 병렬로 처리할 수 있다.</li>
  <li>
    <p>스트림 안에 데이터가 매우 많은 경우, 병렬 스트림과 연산의 순서를 활용하여 더 빠르게 연산할 수 있다.</p>
  </li>
  <li>코드 1
    <ul>
      <li>결과값은 각 인자가 순서대로 연산들을 통과한다.
        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"3"</span><span class="o">,</span> <span class="s">"1"</span><span class="o">,</span> <span class="s">"4"</span><span class="o">,</span> <span class="s">"2"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">)</span>
  <span class="o">.</span><span class="na">map</span><span class="o">(</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"map: "</span> <span class="o">+</span> <span class="n">x</span><span class="o">);</span>
    <span class="k">return</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
  <span class="o">})</span>
  <span class="o">.</span><span class="na">filter</span><span class="o">(</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"filter: "</span> <span class="o">+</span> <span class="n">x</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">;</span>
  <span class="o">})</span>
  <span class="o">.</span><span class="na">forEach</span><span class="o">(</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"forEach: "</span> <span class="o">+</span> <span class="n">x</span><span class="o">);</span>
  <span class="o">})</span>
</pre></td></tr></tbody></table></code></pre></div>        </div>
        <p>결과</p>
        <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre><span class="nx">map</span> <span class="p">:</span> <span class="mi">3</span>   
<span class="nx">filter</span> <span class="p">:</span> <span class="mi">3</span>   
<span class="nx">forEach</span> <span class="p">:</span> <span class="mi">3</span>   
<span class="nx">map</span> <span class="p">:</span> <span class="mi">1</span>   
<span class="nx">filter</span> <span class="p">:</span> <span class="mi">1</span>   
<span class="nx">map</span> <span class="p">:</span> <span class="mi">4</span>   
<span class="nx">filter</span> <span class="p">:</span> <span class="mi">4</span>   
<span class="nx">forEach</span> <span class="p">:</span> <span class="mi">4</span>   
<span class="nx">map</span> <span class="p">:</span> <span class="mi">2</span>   
<span class="nx">filter</span> <span class="p">:</span> <span class="mi">2</span>   
<span class="nx">forEach</span> <span class="p">:</span> <span class="mi">2</span>   
<span class="nx">map</span> <span class="p">:</span> <span class="mi">5</span>   
<span class="nx">filter</span> <span class="p">:</span> <span class="mi">5</span>   
<span class="nx">forEach</span> <span class="p">:</span> <span class="mi">5</span>   
<span class="nx">map</span> <span class="p">:</span> <span class="mi">5</span>   
<span class="nx">filter</span> <span class="p">:</span> <span class="mi">5</span>   
<span class="nx">forEach</span> <span class="p">:</span> <span class="mi">5</span>
</pre></td></tr></tbody></table></code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>코드 2
    <ul>
      <li><code class="language-plaintext highlighter-rouge">parallel()</code>로 스트림을 병렬스트림으로 바꾼 뒤 연산을 수행하면, 순서없이 병렬로 처리된다.
        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"3"</span><span class="o">,</span> <span class="s">"1"</span><span class="o">,</span> <span class="s">"4"</span><span class="o">,</span> <span class="s">"2"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">)</span>
  <span class="o">.</span><span class="na">parallel</span><span class="o">()</span>
  <span class="o">.</span><span class="na">map</span><span class="o">(</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"map: "</span> <span class="o">+</span> <span class="n">x</span><span class="o">);</span>
    <span class="k">return</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
  <span class="o">})</span>
  <span class="o">.</span><span class="na">filter</span><span class="o">(</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"filter: "</span> <span class="o">+</span> <span class="n">x</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">;</span>
  <span class="o">})</span>
  <span class="o">.</span><span class="na">forEach</span><span class="o">(</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"forEach: "</span> <span class="o">+</span> <span class="n">x</span><span class="o">);</span>
  <span class="o">})</span>
</pre></td></tr></tbody></table></code></pre></div>        </div>
        <p>결과</p>
        <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="nx">filter</span> <span class="p">:</span> <span class="mi">2</span>
<span class="nx">map</span> <span class="p">:</span> <span class="mi">2</span>
<span class="nx">forEach</span> <span class="p">:</span> <span class="mi">2</span>
<span class="nx">filter</span> <span class="p">:</span> <span class="mi">5</span>
<span class="nx">filter</span> <span class="p">:</span> <span class="mi">5</span>
<span class="nx">filter</span> <span class="p">:</span> <span class="mi">4</span>
<span class="nx">filter</span> <span class="p">:</span> <span class="mi">1</span>
<span class="nx">map</span> <span class="p">:</span> <span class="mi">1</span>
<span class="nx">filter</span> <span class="p">:</span> <span class="mi">3</span>
<span class="nx">map</span> <span class="p">:</span> <span class="mi">3</span>
<span class="nx">forEach</span> <span class="p">:</span> <span class="mi">1</span>
<span class="nx">map</span> <span class="p">:</span> <span class="mi">4</span>
<span class="nx">forEach</span> <span class="p">:</span> <span class="mi">3</span>
<span class="nx">forEach</span> <span class="p">:</span> <span class="mi">4</span>
</pre></td></tr></tbody></table></code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<p>출처</p>
<ul>
  <li><a href="https://sehun-kim.github.io/sehun/java-lambda-stream/">https://sehun-kim.github.io/sehun/java-lambda-stream/</a></li>
  <li><a href="https://khj93.tistory.com/entry/JAVA-람다식Rambda란-무엇이고-사용법">https://khj93.tistory.com/entry/JAVA-람다식Rambda란-무엇이고-사용법</a></li>
  <li><a href="https://nekisse.tistory.com/15">https://nekisse.tistory.com/15</a></li>
  <li><a href="http://tcpschool.com/java/java_lambda_reference">http://tcpschool.com/java/java_lambda_reference</a></li>
  <li><a href="https://inma.tistory.com/151">https://inma.tistory.com/151</a></li>
  <li><a href="https://sehoonoverflow.tistory.com/26">https://sehoonoverflow.tistory.com/26</a></li>
  <li><a href="https://madplay.github.io/post/difference-between-map-and-flatmap-methods-in-java">https://madplay.github.io/post/difference-between-map-and-flatmap-methods-in-java</a></li>
</ul>

  </div>

  <a class="u-url" href="/Java-lambda" hidden></a>
</article>

<script>
  $(document).ready(function() {
    $('.highlighter-rouge div.highlight').prepend('<i class="fas fa-code code-block"></i>');
  })
</script>

      </div>
    </main>
    <script src="/assets/js/jquery-3.6.0.min.js" />
  </body>

</html>
